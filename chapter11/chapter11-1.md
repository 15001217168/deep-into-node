
## 文件系统

fs模块是文件操作的封装，它提供了文件的读取、写入、更名、删除、遍历目录、链接POSIX文件系统操作。与其他模块不同的是，fs模块中的所有操作都提供了异步和同步两个版本，例如读取文件内容函数的异步方法：readFile(),同步方法readFileSync()。


### 一切皆文件
“一切皆是文件”是 Unix/Linux 的基本哲学之一。不仅普通的文件，目录、字符设备、块设备、 套接字等在 Unix/Linux 中都是以文件被对待；它们虽然类型不同，但是对其提供的却是同一套操作接口。

![](unix-file.jpg)

文件是一种抽象机制，它对磁盘进行了抽象。

文件就是字节序列，每个I/O设备，包括磁盘、键盘、显示器、甚至网络，都可以抽象成文件，在Unix/Linux系统中，系统中所有的输入输出都是通过调用IO系统调用来完成。

文件是对IO的抽象，就像虚拟存储器是对程序存储的抽象，进程是对一个正在运行程序的抽象。这些都是操作系统重要的抽象。

抽象机制最重要的特性是对管理对象的命名，所以文件有文件名，且文件名要符合一定的规范。


### 文件主要操作
- open
- read
- write
- close
上面的操作比较简单，就不是细说，后面会写文章再介绍读文件、写文件、刷新数据这几个重要的操作。如果有兴趣，可以通过man 2 read 命令来查看帮助文档。

### 文件系统之高级读写
#### 文件映射mmap


#### 离散IO pwrite, pread




### 文件类型
可以通过ls -l查看文件类型，主要有下面几种常见的。
- 普通文件
  - 包括文本文件和二进制文件
- 目录 
  - 和普通文件相比，目录也存储在介质上，但是目录不存储常规文件，它只是用来组织、管理文件。
- proc文件
  - proc不存储，所以不占用任何空间，proc使得内核可以生成与系统状态和配置相关的信息，该信息可以由用户和系统内核从普通文件读取，无需专门的工具。
其它更多的文件类型，可以通过man ls 查看。


### 文件属性
文件属性包括文件权限信息、创建时间、最后修改时间、最后读取时间、文件大小、文件引用数等信息，这些文件属性也称为文件元数据。


### 挂载点(mount point)
在系统中，很多文件组成一棵非常大的树，树的根就是根目录。

在通过情况下，并不是所有的文件都在一个磁盘上，文件系统有可能存储在多个磁盘上。

每个磁盘都有自己的文件系统，但在访问文件时，通过统一的操作系统入口，所以磁盘上的文件系统必须挂载到主树上来。其它磁盘文件系统挂载在主树中的目录，就称为挂载点 （mount point）。

